[[language]]
name = "bash"
auto-format = false
language-servers = ["bash-language-server", "efm-langserver"]

[[language]]
name = "bibtex"
auto-format = false
language-servers = ["texlab"]

[[language]]
name = "dockerfile"
auto-format = false
language-servers = ["docker-langserver", "efm-langserver"]

[[language]]
name = "env"
file-types = [
  "env",
  ".env",
  ".env.local",
  ".env.development",
  ".env.production",
  ".env.dist",
  ".envrc",
  ".envrc.local",
  ".envrc.private",
]
auto-format = false
language-servers = ["efm-langserver"]

[[language]]
name = "git-commit"
auto-format = false
language-servers = ["efm-langserver"]

[[language]]
name = "json"
auto-format = false

[[language]]
name = "latex"
auto-format = false
language-servers = ["texlab"]

[[language]]
name = "python"
auto-format = false
language-servers = ["efm-langserver", "ruff-lsp", "pylsp"]

[[language]]
name = "toml"
auto-format = false
formatter = { command = "taplo", args = ["fmt", "-"] }
language-servers = ["efm-langserver", "taplo"]

[[language]]
name = "yaml"
auto-format = false
language-servers = [
  "ansible-language-server",
  "efm-langserver",
  "yaml-language-server",
]

[language-server.efm-langserver]
command = "efm-langserver"
config.documentFormatting = true

[language-server.ruff-lsp]
command = "ruff-lsp"
config.documentFormatting = true

[language-server.pylsp.config.pylsp.plugins]
autopep8 = { enabled = false }
black = { enabled = true }
flake8 = { enabled = false }
isort = { enabled = true }
mccabe = { enabled = false }
memestra = { enabled = true }
pycodestyle = { enabled = false }
pyflakes = { enabled = false }
pylint = { enabled = false }
rope = { enabled = true }
ruff = { enabled = false }
yapf = { enabled = false }

[language-server.texlab]
config.texlab.build.onSave = true
config.texlab.build.forwardSearchAfter = false
config.texlab.build.auxDirectory = "build"
config.texlab.build.executable = "tectonic"
config.texlab.build.args = [
  "-X",
  "compile",
  "%f",
  "--synctex",
  "--keep-logs",
  "--keep-intermediates",
  "--outdir=build",
  "-Zshell-escape",
]
config.texlab.chktex.onOpenAndSave = true
config.texlab.chktex.onEdit = true
